# الحصول على ترخيص Unity تلقائياً
# Acquire Unity License automatically

name: Acquire Unity License

on:
  workflow_dispatch: {}

permissions:
  contents: read

jobs:
  activation:
    name: Request activation file
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # طلب ملف التفعيل اليدوي
      # Request manual activation file
      - name: Request manual activation file
        id: getManualLicenseFile
        uses: game-ci/unity-request-activation-file@v2
        with:
          unityVersion: 2022.3.22f1

      # رفع ملف التفعيل كـ artifact
      # Upload activation file as artifact
      - name: Expose as artifact
        uses: actions/upload-artifact@v4
        with:
          name: Unity-Activation-File
          path: ${{ steps.getManualLicenseFile.outputs.filePath }}
          retention-days: 5

      # ملاحظة: بعد تحميل الملف، اتبع الخطوات التالية:
      # Note: After downloading the file, follow these steps:
      # 1. اذهب إلى https://license.unity3d.com/manual
      #    Go to https://license.unity3d.com/manual
      # 2. ارفع ملف .alf الذي تم تحميله
      #    Upload the downloaded .alf file
      # 3. احصل على ملف .ulf
      #    Get the .ulf file
      # 4. أضف محتوى .ulf كـ Secret باسم UNITY_LICENSE
      #    Add .ulf content as Secret named UNITY_LICENSE
